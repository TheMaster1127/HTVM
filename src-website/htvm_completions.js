

let HTVM_Syntax_AutoComplete = [{ name: "if" }, { name: "else if" }, { name: "else" }, { name: "def obj" }, { name: "prop" }, { name: "crew" }, { name: "alliance" }, { name: "method" }, { name: "while" }, { name: "for" }, { name: "Loop" }, { name: "Loop," }, { name: "Loop, Parse," }, { name: "continue" }, { name: "break" }, { name: "func" }, { name: "await" }, { name: "switch" }, { name: "case" }, { name: "throw" }, { name: "try" }, { name: "catch" }, { name: "finally" }, { name: "var" }, { name: "let" }, { name: "const" }, { name: "return" }, { name: "end" }, { name: "StringTrimLeft" }, { name: "StringTrimRight" }, { name: "Random" }, { name: "Sleep" }, { name: "FileRead" }, { name: "FileAppend" }, { name: "FileDelete" }, { name: "Sort" }, { name: "MsgBox" }, { name: "HTVM_func1" }, { name: "HTVM_func1" }, { name: "HTVM_func1" }, { name: "LoopParseFunc" }, { name: "LoopParseFunc" }, { name: "LoopParseFunc" }, { name: "print" }, { name: "print" }, { name: "print" }, { name: "STR" }, { name: "INT" }, { name: "FLOAT" }, { name: "STR" }, { name: "INT" }, { name: "FLOAT" }, { name: "INT" }, { name: "STR" }, { name: "FLOAT" }, { name: "InStr" }, { name: "Random" }, { name: "Sleep" }, { name: "input" }, { name: "FileRead" }, { name: "FileAppend" }, { name: "FileDelete" }, { name: "StrLen" }, { name: "Asc" }, { name: "Abs" }, { name: "ACos" }, { name: "ASin" }, { name: "ATan" }, { name: "Ceil" }, { name: "Cos" }, { name: "Exp" }, { name: "Ln" }, { name: "Log" }, { name: "Round" }, { name: "Sin" }, { name: "Sqrt" }, { name: "Tan" }, { name: "SubStr" }, { name: "Trim" }, { name: "StrReplace" }, { name: "StringTrimLeft" }, { name: "StringTrimRight" }, { name: "StrLower" }, { name: "StrSplit" }, { name: "Chr" }, { name: "Mod" }, { name: "Floor" }, { name: "Sort" }, { name: "getDataFromAPI" }, { name: "FileCreateDir" }, { name: "FileRemoveDir" }, { name: "FileExist" }, { name: "isWindows" }, { name: "GetParams" }, { name: "BuildInVars" }, { name: "RegExReplace" }, { name: "RunCMD" }, { name: "RegExMatch" }, { name: "ExitApp" }, { name: "InStr" }, { name: "InStr" }, { name: "Random" }, { name: "Random" }, { name: "Sleep" }, { name: "Sleep" }, { name: "input" }, { name: "input" }, { name: "FileAppendJs" }, { name: "FileDelete" }, { name: "FileAppend" }, { name: "FileRead" }, { name: "StrLen" }, { name: "StrLen" }, { name: "Chr" }, { name: "Chr" }, { name: "Asc" }, { name: "Abs" }, { name: "ACos" }, { name: "ASin" }, { name: "ATan" }, { name: "Ceil" }, { name: "Cos" }, { name: "Exp" }, { name: "Ln" }, { name: "Log" }, { name: "Round" }, { name: "Sin" }, { name: "Sqrt" }, { name: "Tan" }, { name: "Asc" }, { name: "Abs" }, { name: "ACos" }, { name: "ASin" }, { name: "ATan" }, { name: "Ceil" }, { name: "Cos" }, { name: "Exp" }, { name: "Ln" }, { name: "Log" }, { name: "Round" }, { name: "Sin" }, { name: "Sqrt" }, { name: "Tan" }, { name: "SubStr" }, { name: "SubStr" }, { name: "Trim" }, { name: "StrReplace" }, { name: "StringTrimLeft" }, { name: "StringTrimRight" }, { name: "StrLower" }, { name: "StrSplit" }, { name: "Mod" }, { name: "Floor" }, { name: "Trim" }, { name: "StrReplace" }, { name: "StringTrimLeft" }, { name: "StringTrimRight" }, { name: "StrLower" }, { name: "StrSplit" }, { name: "Mod" }, { name: "Floor" }, { name: "Sort" }, { name: "getDataFromAPI" }, { name: "FileCreateDir" }, { name: "FileRemoveDir" }, { name: "FileExist" }, { name: "isWindows" }, { name: "GetParams" }, { name: "BuildInVars" }, { name: "RegExReplace" }, { name: "RunCMD" }, { name: "RegExMatch" }, { name: "ExitApp" }, { name: "Sort" }, { name: "getDataFromAPI" }, { name: "getUrlParams" }, { name: "BuildInVars" }, { name: "RegExReplace" }, { name: "RegExMatch" }, { name: "MsgBox" }, { name: "Gui_Show" }, { name: "Gui_Update" }, { name: "Gui_Button" }, { name: "Gui_Edit" }, { name: "Gui_Text" }, { name: "Gui_Size" }, { name: "Gui_Font" }, { name: "Gui_Font_Id" }, { name: "Gui_Size_Id" }, { name: "GuiControl" }, { name: "Gui_DropDownList" }, { name: "Gui_Hide" }, { name: "Gui_Move" }, { name: "Gui_Color" }, { name: "Gui_Image" }, { name: "Gui_Toggle" }, { name: "Gui_CheckBox" }, { name: "MakeHotKey" }, { name: "sortArr" }, { name: "sortArr" }, { name: "sortArr" }, { name: "countChars" }, { name: "countChars" }, { name: "countChars" }, { name: "StrTitleCase" }, { name: "StrTitleCase" }, { name: "StrTitleCase" }, { name: "createBackendInit" }, { name: "addEndpoint" }, { name: "startServer" }, { name: "getDataFromEndpoint" }, { name: "HTVM_getLang_HTVM" }, { name: "HTVM_getLang_HTVM" }, { name: "HTVM_getLang_HTVM" }, { name: "ErrorMsg" }, { name: "A_LoopField" }, { name: "A_Index" }, { name: "add" }, { name: "pop" }, { name: "size" }, { name: "insert" }, { name: "rm" }, { name: "indexOf" }, { name: "int" }, { name: "str" }, { name: "void" }, { name: "bool" }, { name: "float" }, { name: "int8" }, { name: "int16" }, { name: "int32" }, { name: "int64" }, { name: "arr" }, { name: "arr int" }, { name: "arr str" }, { name: "arr float" }, { name: "arr bool" }, { name: "global" }, { name: "this" }]


let Completer = {
    getCompletions: function (editor, session, pos, prefix, callback) {
        // If the prefix starts with "p", we allow autocompletion.
        if (prefix.startsWith("p")) {
            // Proceed with filtering completions
        } else {
            // If the prefix length is not more than 1, we return early
            if (prefix.length <= 1) {
                callback(null, []); // Empty array means no suggestions
                return;
            }
        }

        let prefixLower = prefix.toLowerCase();
        let filteredTables = HTVM_Syntax_AutoComplete.filter(function (table) {
            return table.name.toLowerCase().startsWith(prefixLower);
        });

        let limitedTables = filteredTables;

        // Return the filtered and mapped completions
        callback(
            null,
            limitedTables.map(function (table) {
                return {
                    caption: table.name,
                    value: table.name,
                };
            })
        );
    }
};

